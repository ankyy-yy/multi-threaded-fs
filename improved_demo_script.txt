# Multi-Threaded File System - Complete Demo Script
# This script demonstrates all features with proper error handling

# === USER MANAGEMENT ===
remove-user admin
register admin password123 admin
login admin password123
whoami

# Register a regular user for testing
register user1 pass123

# === BASIC FILE OPERATIONS ===
create-file demo.txt
write-file demo.txt "Hello Multi-Threaded File System! This is a comprehensive demo."
read-file demo.txt
file-info demo.txt

# === DIRECTORY OPERATIONS ===
create-dir documents
create-dir projects
list-dir .

# === FILE MANAGEMENT (Fixed move command) ===
copy-file demo.txt documents/demo_copy.txt
move-file demo.txt projects/demo.txt
list-dir documents
list-dir projects

# Rename the moved file
rename-file projects/demo.txt projects/renamed_demo.txt
list-dir projects

# === COMPRESSION TESTING (Larger content for better compression) ===
create-file large_file.txt
write-file large_file.txt "This is a large file with lots of repetitive content for compression testing. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. This content repeats to create a larger file for better compression ratios. Lorem ipsum dolor sit amet, consectetur adipiscing elit."
compress-file large_file.txt
compression-stats
decompress-file large_file.txt

# === CACHE MANAGEMENT ===
get-cache-policy
set-cache-policy LRU
resize-cache 1000

# Pin and prefetch files that actually exist
pin-file projects/renamed_demo.txt
prefetch-file documents/demo_copy.txt
cache-analytics
hot-files 3

# === BACKUP OPERATIONS ===
create-backup demo_backup_1
list-backups
backup-dashboard

# === FILE SEARCH ===
find-file *.txt
find-file demo* documents
find-file renamed* projects

# === CACHE POLICY TESTING ===
set-cache-policy LFU
set-cache-policy FIFO
set-cache-policy LIFO
set-cache-policy LRU

# === PERFORMANCE MONITORING ===
show-stats
unpin-file projects/renamed_demo.txt
create-backup demo_backup_2
list-backups

# Clean up one backup
delete-backup demo_backup_1
show-stats
cache-analytics

# === MULTI-THREADING FEATURES (if available) ===
thread-pool-status
set-thread-pool-size 8

# === ADVANCED FILE OPERATIONS ===
# Create multiple files for batch operations
create-file batch1.txt
write-file batch1.txt "Batch file 1 content"
create-file batch2.txt
write-file batch2.txt "Batch file 2 content"

# Test async operations
async-read-file projects/renamed_demo.txt
async-write-file async_test.txt "Async content test"
show-async-stats
wait-for-all-tasks

# === STATISTICS AND CLEANUP ===
show-stats
reset-stats
show-stats

# === USER CLEANUP ===
remove-user user1
logout

# Remove admin user (this should work now)
remove-user admin

# Re-register admin for future use
register admin password123 admin

# === EXIT ===
exit
